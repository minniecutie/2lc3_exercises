Axiom â€œBag membershipâ€:
    F â‹¿ âŸ… x â™ R â€¢ E âŸ†  â‰¡  (âˆƒ x â™ R â€¢ F = E)
Axiom â€œBag membershipâ€:
    F â‹¿ âŸ… x, y â™ R â€¢ E âŸ†  â‰¡  (âˆƒ x, y â™ R â€¢ F = E)

Theorem â€œBag abbreviationâ€:
   âŸ… x â™ P âŸ† = âŸ… x â™ P â€¢ x âŸ†
Proof: By â€œReflexivity of =â€

Theorem â€œBag abbreviationâ€:
   âŸ… x, y â™ P âŸ† = âŸ… x, y â™ P â€¢ âŸ¨ x, y âŸ© âŸ†
Proof: By â€œReflexivity of =â€

Theorem â€œSimple bag membershipâ€:
   e â‹¿ âŸ… x â™ P âŸ†  â‰¡ P[x â‰” e]
Proof:
    e â‹¿ âŸ… x â™ P âŸ†
  â‰¡âŸ¨ â€œBag membershipâ€ âŸ©
    âˆƒ x â™ P â€¢ e = x   
  â‰¡âŸ¨ â€œTrading for âˆƒâ€ âŸ©
    âˆƒ x â™ e = x â€¢ P  
  â‰¡âŸ¨ â€œOne-point rule for âˆƒâ€ âŸ© 
    P [x â‰” e]

Theorem â€œDirect bag comprehension membershipâ€:
   âˆ€ x â€¢ x â‹¿ âŸ… x â™ P âŸ†  â‰¡ P
Proof:
  For any `x`:
      x â‹¿ âŸ… x â™ P âŸ†
    =âŸ¨ â€œSimple bag membershipâ€ âŸ©
      P [x â‰” x]
    =âŸ¨ Substitution âŸ©
      P

Axiom (11.81) â€œBag occurrencesâ€:
    a # âŸ… x : t â™ P â€¢ E âŸ† = âˆ‘ x : t â™ P âˆ§ a = E â€¢ 1
Axiom (11.81) â€œBag occurrencesâ€:
    a # âŸ… x : t, y : u â™ P â€¢ E âŸ† = âˆ‘ x : t, y : u â™ P âˆ§ a = E â€¢ 1

Axiom (11.4) â€œBag extensionalityâ€:
   B = C  â‰¡  (âˆ€ e  â€¢  e # B  =  e # C)

Axiom â€œSplit off term at topâ€:
    (âˆ‘ i : â„• â™ i < suc m â€¢ E)
  = (âˆ‘ i : â„• â™ i < m â€¢ E) + E[i â‰” m]

Lemma â€œCountingâ€: (âˆ‘ i â™ i < n â€¢ 1) = n
Proof:
  By induction on `n : â„•`:
    Base case `(âˆ‘ i â™ i < 0 â€¢ 1) = 0`:
        âˆ‘ i â™ i < 0 â€¢ 1
      =âŸ¨ â€œNothing is less than zeroâ€ , â€œEmpty range for âˆ‘â€ âŸ©
        0 
    Induction step `(âˆ‘ i â™ i < suc n â€¢ 1) = suc n`:
        âˆ‘ i â™ i < suc n â€¢ 1
      =âŸ¨ â€œSplit off term at topâ€ âŸ©
        (âˆ‘ i â™ i < n â€¢ 1) + 1[i â‰” n]
      =âŸ¨ Induction hypothesis, Substitution âŸ©
        n + 1
      =âŸ¨ â€œSuccessorâ€ âŸ©
        suc n   

Theorem â€œBag reconstructionâ€:
    B = âŸ… x, i â™ i < x # B â€¢ x âŸ†
Proof:
  Using â€œBag extensionalityâ€:
    For any `e`:
        e # âŸ… x, i â™ i < x # B â€¢ x âŸ†
      =âŸ¨ â€œBag occurrencesâ€ âŸ©
        âˆ‘ x , i â™ i < x # B âˆ§ e = x â€¢ 1
      =âŸ¨ â€œNesting for âˆ‘â€ âŸ©      
        âˆ‘ x â™ e = x â€¢ âˆ‘ i â™ i < x # B â€¢ 1
      =âŸ¨ â€œOne-point rule for âˆ‘â€ âŸ©
        (âˆ‘ i â™ i < x # B â€¢ 1)[x â‰” e]
      =âŸ¨ Substitution âŸ©
        âˆ‘ i â™ i < e # B â€¢ 1  
      =âŸ¨ â€œCountingâ€ âŸ©  
        e # B

Lemma â€œNon-zeroâ€: (âˆƒ i â€¢ i < a) â‰¡ a â‰  0
Proof:
  By cases: `a = 0`, `0 < a`
    Completeness: By â€œZero is <-least elementâ€
    Case `a = 0`:
        (âˆƒ i â€¢ i < a) â‰¡ a â‰  0
      =âŸ¨ Assumption `a = 0` âŸ©
        (âˆƒ i â€¢ i < 0) â‰¡ 0 â‰  0
      =âŸ¨ â€œIrreflexivity of â‰ â€ âŸ©
        (âˆƒ i â€¢ i < 0) â‰¡ false
      =âŸ¨ â€œNothing is less than zeroâ€, â€œFalse âˆƒ bodyâ€ âŸ©
        false â‰¡ false
      =âŸ¨ â€œReflexivity of â‰¡â€ âŸ©
        true
    Case `0 < a`:  
        (âˆƒ i â€¢ i < a) â‰¡ a â‰  0
      =âŸ¨ â€œDefinition of â‰ â€ âŸ©
        (âˆƒ i â€¢ i < a) â‰¡ Â¬ (a = 0) 
      =âŸ¨ â€œIrreflexivity of <â€ with Assumption `0 < a`, â€œIdentity of â‰¡â€ âŸ©
        âˆƒ i â€¢ i < a
      â‡âŸ¨ â€œâˆƒ-Introductionâ€ âŸ©
        (i < a)[i â‰” 0]
      =âŸ¨ Substitution âŸ©
         0 < a
      =âŸ¨ Assumption `0 < a` âŸ©
         true        
     
â•â•â• â€œIrreflexivity of <â€: a < b â‡’ Â¬ (a = b)      

Lemma â€œAlternative bag extensionalityâ€: a â‹¿ B â‰¡ âˆƒ i â€¢ i < a # B
Proof:
    a â‹¿ B
  â‰¡âŸ¨ â€œBag reconstructionâ€ âŸ©
    a â‹¿ âŸ… x, i â™ i < x # B â€¢ x âŸ†
  â‰¡âŸ¨ â€œBag membershipâ€ âŸ©
    âˆƒ x, i â™ i < x # B â€¢ a = x
  â‰¡âŸ¨ (8.19), (8.20a) âŸ© 
    âˆƒ i â€¢ âˆƒ x â™ i < x # B â€¢ a = x
  â‰¡âŸ¨ â€œTrading for âˆƒâ€ âŸ© 
    âˆƒ i â€¢ âˆƒ x â™ a = x â€¢ i < x # B
  â‰¡âŸ¨ â€œOne-point rule for âˆƒâ€, Substitution âŸ© 
    âˆƒ i â€¢ i < a # B

Theorem â€œBag members have non-zero countâ€:
    a â‹¿ B  â‰¡  a # B â‰  0
Proof:
    a â‹¿ B
  â‰¡âŸ¨ â€œAlternative bag extensionalityâ€ âŸ©  
    âˆƒ i â€¢ i < a # B
  â‰¡âŸ¨ â€œNon-zeroâ€ âŸ©
    a # B â‰  0

Declaration: #_ : Bag t â†’ â„•

Axiom â€œBag comprehension sizeâ€: # âŸ… x â™ R â€¢ E âŸ† = (âˆ‘ x â™ R â€¢ 1)
Axiom â€œBag comprehension sizeâ€: # âŸ… x, y â™ R â€¢ E âŸ† = (âˆ‘ x, y â™ R â€¢ 1)

Theorem â€œBag sizeâ€:
    # B = (âˆ‘ x, i â™ i < x # B â€¢ 1)
Proof:
    # B
  =âŸ¨ â€œBag reconstructionâ€ âŸ©
    # âŸ… x, i â™ i < x # B â€¢ x âŸ†
  =âŸ¨ â€œBag comprehension sizeâ€ âŸ©
    âˆ‘ x, i â™ i < x # B â€¢ 1  

Declaration: _âŠ†_ : Bag t â†’ Bag t â†’ ğ”¹

Axiom (11.83) â€œSubbagâ€ â€œDefinition of âŠ†â€ â€œBag inclusionâ€:
   B âŠ† C  â‰¡  (âˆ€ e â€¢ e # B â‰¤ e # C)

Theorem â€œMonotonicity of #â€: B âŠ† C â‡’ e # B â‰¤ e # C
Proof:
    B âŠ† C 
  =âŸ¨ â€œBag inclusionâ€ âŸ©
    âˆ€ e â€¢ e # B â‰¤ e # C
  â‡’âŸ¨ â€œInstantiationâ€ (9.13) âŸ©
    (e # B â‰¤ e # C)[e â‰” e]
  =âŸ¨ Substitution âŸ©
     e # B â‰¤ e # C    

Theorem â€œSubbag membershipâ€:
    B âŠ† C â‡’ a â‹¿ B â‡’ a â‹¿ C
Proof:
  Assuming `B âŠ† C`:
      a â‹¿ B
    =âŸ¨ â€œAlternative bag extensionalityâ€ âŸ©
      âˆƒ i â€¢ i < a # B 
    =âŸ¨ â€œIdentity of âˆ§â€, â€œMonotonicity of #â€ with Assumption `B âŠ† C` âŸ©
      âˆƒ i â€¢ i < a # B âˆ§ a # B â‰¤ a # C
    â‡’âŸ¨ â€œBody monotonicity of âˆƒâ€ with â€œTransitivity of < with â‰¤â€ with â€œShuntingâ€ âŸ©
      âˆƒ i â€¢ i < a # C
    =âŸ¨ â€œAlternative bag extensionalityâ€ âŸ©
      a â‹¿ C

â•â•â• â€œTransitivity of < with â‰¤â€: a < b â‡’ b â‰¤ c â‡’ a < c

Theorem â€œReflexivity of bag inclusionâ€: B âŠ† B
Proof:
  Using â€œBag inclusionâ€:
    For any `e`:
        e # B 
      â‰¤âŸ¨ â€œReflexivity of â‰¤â€ âŸ©
        e # B  

Theorem â€œTransitivity of bag inclusionâ€: X âŠ† Y â‡’ Y âŠ† Z â‡’ X âŠ† Z
Proof:
  Assuming `X âŠ† Y` and using with â€œBag inclusionâ€,
           `Y âŠ† Z` and using with â€œBag inclusionâ€:
    Using â€œBag inclusionâ€:
      For any `e`:
          e # X
        â‰¤âŸ¨ Assumption `X âŠ† Y` âŸ©
          e # Y
        â‰¤âŸ¨ Assumption `Y âŠ† Z` âŸ©
          e # Z
         
Theorem â€œFlipped transitivity of bag inclusionâ€: Y âŠ† Z â‡’ X âŠ† Y â‡’ X âŠ† Z
Proof:
  By â€œShuntingâ€, â€œTransitivity of bag inclusionâ€

Theorem â€œAntisymmetry of bag inclusionâ€: X âŠ† Y â‡’ Y âŠ† X â‡’ X = Y
Proof:
  Assuming `X âŠ† Y` and using with â€œBag inclusionâ€,
           `Y âŠ† X` and using with â€œBag inclusionâ€:
    Using â€œBag extensionalityâ€:
      For any `e`:
          e # X = e # Y
        â‡âŸ¨ â€œAntisymmetry of â‰¤â€ with â€œShuntingâ€ âŸ© 
          e # X â‰¤ e # Y âˆ§ e # Y â‰¤ e # X
        =âŸ¨ Assumption `X âŠ† Y`, Assumption `Y âŠ† X`, â€œIdentity of âˆ§â€ âŸ© 
          true
         

Axiom â€œBag unionâ€:          e # S âˆª T  =  (e # S)  +  (e # T)
Axiom â€œBag intersectionâ€:   e # S âˆ© T  =  (e # S)  â†“  (e # T)

Theorem â€œSymmetry of bag unionâ€: S âˆª T = T âˆª S
Proof:
  Using â€œBag extensionalityâ€:
    For any `e`:
        e # S âˆª T
      =âŸ¨ â€œBag unionâ€âŸ© 
        (e # S)  +  (e # T)
      =âŸ¨ â€œBag unionâ€ âŸ© 
        e # T âˆª S
       
Theorem â€œAssociativity of bag unionâ€: S âˆª (T âˆª W) = (S âˆª T) âˆª W
Proof:
  Using â€œBag extensionalityâ€:
    For any `e`:
        e # S âˆª (T âˆª W)
      =âŸ¨ â€œBag unionâ€ âŸ© 
        (e # S) + (e # T) + (e # W)
      =âŸ¨ â€œBag unionâ€ âŸ© 
        e # (S âˆª T) âˆª W

Theorem â€œBag union membershipâ€: x â‹¿ B âˆª C  â‰¡  x â‹¿ B âˆ¨ x â‹¿ C
Proof:
    x â‹¿ B âˆª C
  â‰¡âŸ¨ â€œBag members have non-zero countâ€, â€œBag unionâ€ âŸ©
    (x # B) + (x # C) â‰  0
  â‰¡âŸ¨ â€œDefinition of â‰ â€, â€œZero sumâ€ âŸ©
    Â¬ (x # B = 0 âˆ§ x # C = 0)
  â‰¡âŸ¨ â€œDe Morganâ€, â€œDefinition of â‰ â€ âŸ©
    x # B â‰  0 âˆ¨ x # C â‰  0
  â‰¡âŸ¨ â€œBag members have non-zero countâ€ âŸ©
    x â‹¿ B âˆ¨ x â‹¿ C

Theorem â€œIsotonicity of +â€: a + b â‰¤ a + c  â‰¡  b â‰¤ c
Proof:
  By induction on `a : â„•`:
    Base case `0 + b â‰¤ 0 + c  â‰¡  b â‰¤ c`:
      By â€œIdentity of +â€
    Induction step `suc a + b â‰¤ suc a + c  â‰¡  b â‰¤ c`:
        suc a + b â‰¤ suc a + c
      â‰¡âŸ¨ â€œDefinition of + for `suc`â€ âŸ©
        suc (a + b) â‰¤ suc (a + c)
      â‰¡âŸ¨ â€œIsotonicity of successorâ€ âŸ©
        a + b â‰¤ a + c
      â‰¡âŸ¨ Induction hypothesis âŸ©
        b â‰¤ c

Theorem â€œWeakening of bag unionâ€: S âŠ† S âˆª T
Proof:
  Using â€œBag inclusionâ€:
    For any `e`:
        e # S
      =âŸ¨ â€œIdentity of +â€ âŸ©
        (e # S) + 0
      â‰¤âŸ¨ â€œIsotonicity of +â€ with â€œZero is least elementâ€ âŸ©
        (e # S) + (e # T) 
      =âŸ¨ â€œBag unionâ€ âŸ©
        e # S âˆª T  

Theorem â€œSymmetry of bag intersectionâ€: S âˆ© T = T âˆ© S
Proof:
  Using â€œBag extensionalityâ€:
    For any `e`:
        e # S âˆ© T
      =âŸ¨ â€œBag intersectionâ€ âŸ©
         (e # S) â†“ (e # T)
      =âŸ¨ â€œSymmetry of â†“â€, â€œBag intersectionâ€ âŸ©
        e # T âˆ© S
        
Theorem â€œAssociativity of bag intersectionâ€: S âˆ© (T âˆ© W) = (S âˆ© T) âˆ© W
Proof:
  Using â€œBag extensionalityâ€:
    For any `e`:
        e # S âˆ© (T âˆ© W)
      =âŸ¨ â€œBag intersectionâ€ âŸ©
         (e # S) â†“ ((e # T) â†“ (e # W))
      =âŸ¨ â€œAssociativity of â†“â€, â€œBag intersectionâ€ âŸ©
        e # (S âˆ© T) âˆ© W

Theorem â€œIdempotency of bag intersectionâ€: S âˆ© S = S
Proof:
  Using â€œBag extensionalityâ€:
    For any `e`:
        e # S âˆ© S
      =âŸ¨ â€œBag intersectionâ€ âŸ©
        (e # S) â†“ (e # S)
      =âŸ¨ â€œIdempotency of â†“â€ âŸ©
         e # S
            
Theorem â€œWeakening of bag intersectionâ€: S âˆ© T âŠ† S
Proof:
  Using â€œBag inclusionâ€:
    For any `e`:
        e # S âˆ© T
      =âŸ¨ â€œBag intersectionâ€ âŸ©
        (e # S) â†“ (e # T)
      â‰¤âŸ¨ â€œWeakening for â†“â€ âŸ©
         e # S  

â•â•â• (15.57) "Minimum is lower bound": a â†“ b â‰¤ a âˆ§ a â†“ b â‰¤ b

Theorem â€œBag inclusion via âˆ©â€:  S âŠ† T  â‰¡  S âˆ© T = S
Proof:
    S âŠ† T 
  =âŸ¨ â€œBag inclusionâ€ âŸ©
    âˆ€ e â€¢ e # S â‰¤ e # T
  =âŸ¨ â€œâ‰¤ via â†“â€ âŸ©
    âˆ€ e â€¢ (e # S) â†“ (e # T) = e # S
  =âŸ¨ â€œBag intersectionâ€ âŸ© 
    âˆ€ e â€¢ e # S âˆ© T = e # S
  =âŸ¨ â€œBag extensionalityâ€ âŸ© 
    S âˆ© T = S  

Theorem â€œMonotonicity of âˆ©â€: S âŠ† T  â‡’  S âˆ© U âŠ† T âˆ© U
Proof:
  Assuming `S âŠ† T` and using with â€œBag inclusionâ€:
    Using â€œBag inclusionâ€:
      For any `e`:
          e # S âˆ© U 
        =âŸ¨ â€œBag intersectionâ€ âŸ©
          (e # S) â†“ (e # U)
        â‰¤âŸ¨ â€œMonotonicity of â†“â€ with Assumption `S âŠ† T` âŸ©
          (e # T) â†“ (e # U)
        =âŸ¨ â€œBag intersectionâ€ âŸ©
          e # T âˆ© U    

Theorem â€œMonotonicity of âˆ©â€: S âŠ† T  â‡’  S âˆ© U âŠ† T âˆ© U
Proof:
  Assuming `S âŠ† T` and using with â€œBag inclusionâ€:
    Using â€œBag inclusionâ€:
      For any `e`:
          e # S âˆ© U 
        =âŸ¨ â€œBag intersectionâ€ âŸ©
          (e # S) â†“ (e # U)
        â‰¤âŸ¨ â€œMonotonicity of â†“â€ with Assumption `S âŠ† T` âŸ©
          (e # T) â†“ (e # U)
        =âŸ¨ â€œBag intersectionâ€ âŸ©
          e # T âˆ© U    

Theorem â€œMonotonicity of âˆ©â€: S âŠ† T  â‡’  U âŠ† V  â‡’  S âˆ© U âŠ† T âˆ© V
Proof:
  Assuming (1) `S âŠ† T`, (2) `U âŠ† V` :
      S âˆ© U
    âŠ†âŸ¨ â€œMonotonicity of âˆ©â€ with Assumption (1) âŸ© 
      T âˆ© U
    âŠ†âŸ¨ â€œMonotonicity of âˆ©â€ with Assumption (2) âŸ© 
      T âˆ© V
    
Theorem â€œReflexivity of âŠ†â€: S = T â‡’ S âŠ† T
Proof:
  Assuming `S = T`:
      S âŠ† T
    =âŸ¨ Assumption `S = T` âŸ©
      T âŠ† T â€” This is â€œReflexivity of bag inclusionâ€ 

Axiom â€œProper subbagâ€ â€œDefinition of âŠ‚â€:
    S âŠ‚ T  â‰¡   S âŠ† T âˆ§ S â‰  T

Lemma â€œMutual inclusionâ€: S = T â‰¡ S âŠ† T âˆ§ T âŠ† S
Proof:
  Using â€œMutual implicationâ€:
    Subproof for `S = T â‡’ S âŠ† T âˆ§ T âŠ† S`:
      Assuming `S = T`:
          S âŠ† T âˆ§ T âŠ† S
        =âŸ¨ Assumption `S = T` âŸ©
          S âŠ† S âˆ§ S âŠ† S
        =âŸ¨ â€œReflexivity of bag inclusionâ€, â€œIdempotency of âˆ§â€ âŸ©
          true
    Subproof for `S âŠ† T âˆ§ T âŠ† S â‡’ S = T`:
      By â€œAntisymmetry of bag inclusionâ€ with â€œShuntingâ€      

Theorem â€œDefinition of âŠ‚ via âŠ†â€: S âŠ‚ T  â‰¡  S âŠ† T âˆ§ Â¬ (T âŠ† S)
Proof:
    S âŠ‚ T
  â‰¡âŸ¨ â€œDefinition of âŠ‚â€, â€œDefinition of â‰ â€ âŸ©
    S âŠ† T âˆ§ Â¬ (S = T)
  â‰¡âŸ¨ â€œMutual inclusionâ€ âŸ©
    S âŠ† T âˆ§ Â¬ (S âŠ† T âˆ§ T âŠ† S)
  â‰¡âŸ¨ â€œDe Morganâ€, â€œAbsorptionâ€ âŸ©
    S âŠ† T âˆ§ Â¬ (T âŠ† S)

Theorem â€œInclusion in terms of âŠ‚â€:
    S âŠ† T  â‰¡  S âŠ‚ T âˆ¨ S = T
Proof:
    S âŠ‚ T âˆ¨ S = T
  â‰¡âŸ¨ â€œProper subbagâ€, â€œDefinition of â‰ â€ âŸ©
    (S âŠ† T âˆ§ Â¬ (S = T)) âˆ¨ S = T
  â‰¡âŸ¨ â€œAbsorptionâ€ âŸ©
    S âŠ† T âˆ¨ S = T
  â‰¡âŸ¨ â€œReflexivity of âŠ†â€ with (3.57) âŸ©
    S âŠ† T  

Theorem â€œTransitivity of âŠ† with âŠ‚â€:
    X âŠ† Y â‡’ Y âŠ‚ Z â‡’ X âŠ‚ Z
Proof:
  Assuming `X âŠ† Y`:
      Y âŠ‚ Z
    =âŸ¨ â€œDefinition of âŠ‚ via âŠ†â€ âŸ©
      Y âŠ† Z âˆ§ Â¬ (Z âŠ† Y)
    â‡’âŸ¨ Antitonicity with Assumption `X âŠ† Y` âŸ©
      X âŠ† Z âˆ§ Â¬ (Z âŠ† Y)
    â‡’âŸ¨ Antitonicity with Assumption `X âŠ† Y` âŸ©
      X âŠ† Z âˆ§ Â¬ (Z âŠ† X)
    =âŸ¨ â€œDefinition of âŠ‚ via âŠ†â€ âŸ©
      X âŠ‚ Z 
 
Axiom â€œBag differenceâ€:  v # S - T  =  (v # S) - (v # T)

Lemma â€œSubtraction of additionâ€: a - (b + c) = (a - b) - c
Proof:
  By induction on `a : â„•`:
    Base case `0 - (b + c) = (0 - b) - c`:
      By â€œSubtraction from zeroâ€
    Induction step `suc a - (b + c) = (suc a - b) - c`:
      By induction on `b : â„•`:
        Base case `suc a - (0 + c) = (suc a - 0) - c`:
            suc a - (0 + c)
          =âŸ¨ â€œRight-identity of +â€ âŸ©
            suc a - c
          =âŸ¨ â€œRight-identity of subtractionâ€ âŸ©
            (suc a - 0) - c
        Induction step `suc a - (suc b + c) = (suc a - suc b) - c`:
             suc a - (suc b + c)
           =âŸ¨ â€œDefinition of + for `suc`â€ âŸ©
             suc a - suc (b + c)
           =âŸ¨ â€œSubtraction of successor from successorâ€ âŸ©
             a - (b + c)
           =âŸ¨ Induction hypothesis `a - (b + c) = (a - b) - c` âŸ© 
             (a - b) - c
           =âŸ¨ â€œSubtraction of successor from successorâ€ âŸ©  
             (suc a - suc b) - c

Theorem â€œBag difference with unionâ€: S - (T âˆª U) = (S - T) - U
Proof:
  Using â€œBag extensionalityâ€:
    For any `e`:
        e # S - (T âˆª U)
      =âŸ¨ â€œBag differenceâ€ âŸ©
        (e # S) - (e # T âˆª U)
      =âŸ¨ â€œBag unionâ€ âŸ©
        (e # S) - ((e # T) + (e # U))
      =âŸ¨ â€œSubtraction of additionâ€ âŸ©
         ((e # S) - (e # T)) - (e # U) 
      =âŸ¨ â€œBag differenceâ€ âŸ©
         (e # S - T) - (e # U)
      =âŸ¨ â€œBag differenceâ€ âŸ©
         e # (S - T) - U
      
      
Theorem â€œRe-adding to monusâ€: m â‰¤ n  â‰¡  (n - m) + m = n
Proof:
  By induction on `m : â„•`:
    Base case:
          0 â‰¤ n
        â‰¡âŸ¨ â€œZero is least elementâ€ âŸ©
          true
        â‰¡âŸ¨ â€œRight-identity of +â€, â€œRight-identity of subtractionâ€ âŸ©
          (n - 0) + 0 = n
    Induction step:
      By induction on `n : â„•`:
        Base case:
            suc m â‰¤ 0
          â‰¡âŸ¨ â€œSuccessor is not at most zeroâ€ âŸ©
            false
          â‰¡âŸ¨ â€œZero is not successorâ€ âŸ©
            suc m = 0
          â‰¡âŸ¨ â€œLeft-identity of +â€, â€œSubtraction from zeroâ€ âŸ©
            (0 - suc m) + suc m = 0
        Induction step:
            suc m â‰¤ suc n
          â‰¡âŸ¨ â€œIsotonicity of successorâ€ âŸ©
            m â‰¤ n
          â‰¡âŸ¨ Induction hypothesis `m â‰¤ n  â‰¡  (n - m) + m = n` âŸ©
            (n - m) + m = n
          â‰¡âŸ¨ â€œCancellation of `suc`â€ âŸ©
            suc ((n - m) + m) = suc n
          â‰¡âŸ¨ â€œAdding the successorâ€ âŸ©
            (n - m) + suc m = suc n
          â‰¡âŸ¨ â€œSubtraction of successor from successorâ€ âŸ©
            (suc n - suc m) + suc m = suc n

Theorem â€œBag inclusion via âˆªâ€:  S âŠ† T  â‰¡  S âˆª (T - S) = T
Proof:
    S âŠ† T
  â‰¡âŸ¨ â€œBag inclusionâ€ âŸ©
    âˆ€ x â€¢ x # S â‰¤ x # T
  â‰¡âŸ¨ â€œRe-adding to monusâ€ âŸ©
    âˆ€ x â€¢ ((x # T) - (x # S)) + (x # S) = x # T
  â‰¡âŸ¨ â€œBag differenceâ€ âŸ©
    âˆ€ x â€¢ (x # (T - S)) + (x # S) = x # T
  â‰¡âŸ¨ â€œBag unionâ€ âŸ©
    âˆ€ x â€¢ x # (S âˆª (T - S)) = x # T
  â‰¡âŸ¨ â€œBag extensionalityâ€ âŸ©
    S âˆª (T - S) = T  
