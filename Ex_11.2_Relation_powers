Precedence 115 for: _**_
Associating to the right: _**_
Declaration: _**_ :  (A â†” A)  â†’  â„•  â†’  (A â†” A)

Axiom â€œDefinition of **â€:  R ** 0    =  ğ•€
Axiom â€œDefinition of **â€:  R ** suc i  =  R â¨¾ R ** i

Theorem â€œRight-identity of **â€: R ** 1 = R
Proof:
    R ** 1
  =âŸ¨ Fact `1 = suc 0` âŸ©
    R ** suc 0
  =âŸ¨ â€œDefinition of **â€ âŸ©
    R â¨¾ R ** 0
  =âŸ¨ â€œDefinition of **â€ âŸ©
    R â¨¾ ğ•€
  =âŸ¨ â€œIdentity of â¨¾â€ âŸ©
    R 
     
Theorem â€œAddition in **â€: R ** (i + j) = R ** i â¨¾ R ** j
Proof:
  By induction on `i : â„•`:
    Base case `R ** (0 + j) = R ** 0 â¨¾ R ** j`:
        R ** (0 + j) = R ** 0 â¨¾ R ** j
      =âŸ¨ â€œLeft-identity of +â€, â€œDefinition of **â€, â€œIdentity of â¨¾â€ âŸ©
        R ** j = R ** j â€” This is â€œReflexivity of =â€ 
    Induction step `R ** (suc i + j) = R ** (suc i) â¨¾ R ** j`:
        R ** (suc i + j)
      =âŸ¨ â€œDefinition of + for `suc`â€ âŸ©
        R ** suc (i + j)
      =âŸ¨ â€œDefinition of **â€ âŸ©
        R â¨¾ R ** (i + j)
      =âŸ¨ Induction hypothesis âŸ©
        R â¨¾ R ** i â¨¾ R ** j
      =âŸ¨ â€œDefinition of **â€ âŸ©
        R ** (suc i) â¨¾ R ** j    

Declaration: _* : A â†” A  â†’  A â†” A

Axiom â€œDefinition of `_*`â€:    R * = (â‹ƒ i : â„• â€¢ R ** i)

Theorem â€œCharacterisation of `_*`: Expandingâ€:  R âŠ† R *
Proof:
    R *
  =âŸ¨ â€œDefinition of `_*`â€ âŸ©
    â‹ƒ i : â„• â€¢ R ** i
  =âŸ¨ â€œZero of âˆ¨â€ âŸ©
    â‹ƒ i : â„• â™ i = 1 âˆ¨ true â€¢ R ** i
  =âŸ¨ â€œRange split for â‹ƒâ€ âŸ©
    (â‹ƒ i : â„• â™ true â€¢ R ** i) âˆª (â‹ƒ i : â„• â™ i = 1 â€¢ R ** i)
  =âŸ¨ â€œOne-point rule for â‹ƒâ€, Substitution âŸ©
    (â‹ƒ i : â„• â™ true â€¢ R ** i) âˆª R ** 1
  =âŸ¨ â€œRight-identity of **â€ âŸ©
    (â‹ƒ i : â„• â™ true â€¢ R ** i) âˆª R
  âŠ‡âŸ¨ â€œWeakening for âˆªâ€ âŸ©
    R    

Theorem â€œCharacterisation of `_*`: Reflexivityâ€:
    reflexive (R *)
Proof:
  Using â€œDefinition of reflexivityâ€:
      R *
    =âŸ¨ â€œDefinition of `_*`â€ âŸ©
      â‹ƒ i : â„• â€¢ R ** i
    =âŸ¨ â€œZero of âˆ¨â€ âŸ©
      â‹ƒ i : â„• â™ i = 0 âˆ¨ true â€¢ R ** i
    =âŸ¨ â€œRange split for â‹ƒâ€ âŸ©
      (â‹ƒ i : â„• â™ true â€¢ R ** i) âˆª (â‹ƒ i : â„• â™ i = 0 â€¢ R ** i)
    =âŸ¨ â€œOne-point rule for â‹ƒâ€, Substitution âŸ©
      (â‹ƒ i : â„• â™ true â€¢ R ** i) âˆª R ** 0
    =âŸ¨ â€œDefinition of **â€ âŸ©
      (â‹ƒ i : â„• â™ true â€¢ R ** i) âˆª ğ•€
    âŠ‡âŸ¨ â€œWeakening for âˆªâ€ âŸ©
      ğ•€

Theorem â€œCharacterisation of `_*`: Transitivityâ€:
   transitive (R *)
Proof:
  Using â€œDefinition of transitivityâ€:
    Subproof for `R * â¨¾ R * âŠ† R *`:
          R * â¨¾ R * âŠ† R *
        =âŸ¨ â€œDefinition of `_*`â€ âŸ©
          (â‹ƒ i : â„• â€¢ R ** i) â¨¾ (â‹ƒ j : â„• â€¢ R ** j) 
          âŠ† (â‹ƒ k : â„• â€¢ R ** k)
        =âŸ¨ â€œDistributivity of â¨¾ over â‹ƒâ€ âŸ©
          (â‹ƒ i : â„• â€¢ R ** i â¨¾ (â‹ƒ j : â„• â€¢ R ** j))
          âŠ† (â‹ƒ k : â„• â€¢ R ** k)
        =âŸ¨ â€œDistributivity of â¨¾ over â‹ƒâ€ âŸ©
          (â‹ƒ i : â„• â€¢ (â‹ƒ j : â„• â€¢ R ** i â¨¾ R ** j))
          âŠ† (â‹ƒ k : â„• â€¢ R ** k)
        =âŸ¨ â€œCharacterisation of â‹ƒâ€ âŸ©
          âˆ€ i : â„• â€¢ (â‹ƒ j : â„• â€¢ R ** i â¨¾ R ** j)
          âŠ† (â‹ƒ k : â„• â€¢ R ** k)
        =âŸ¨ â€œCharacterisation of â‹ƒâ€ âŸ©
          âˆ€ i : â„• â€¢ âˆ€ j : â„• â€¢ R ** i â¨¾ R ** j
          âŠ† â‹ƒ k : â„• â€¢ R ** k
        =âŸ¨ â€œAddition in **â€ âŸ©
          âˆ€ i : â„• â€¢ âˆ€ j : â„• â€¢ R ** (i + j)
          âŠ† â‹ƒ k : â„• â€¢ R ** k 
      Proof for this:
        For any `i : â„•`, `j : â„•`:
            â‹ƒ k : â„• â€¢ R ** k
          =âŸ¨ â€œZero of âˆ¨â€ âŸ©
            â‹ƒ k : â„• â™ true âˆ¨ k = i + j â€¢ R ** k 
          =âŸ¨ â€œRange split for â‹ƒâ€ âŸ©
            (â‹ƒ k : â„• â™ true â€¢ R ** k) âˆª (â‹ƒ k : â„• â™ k = i + j â€¢ R ** k) 
          âŠ‡âŸ¨ â€œWeakening for âˆªâ€ âŸ©
            â‹ƒ k : â„• â™ k = i + j â€¢ R ** k
          =âŸ¨ â€œOne-point rule for â‹ƒâ€ âŸ©
            (R ** k)[k â‰” i + j]
          =âŸ¨ Substitution âŸ©
             R ** (i + j)  
                     
Theorem â€œCharacterisation of `_*`: Expansion of powersâ€:
    R âŠ† S  â‡’  reflexive S  â‡’  transitive S  â‡’ R ** i âŠ† S
Proof:
  Assuming `R âŠ† S`,
           `reflexive S` and using with â€œDefinition of reflexivityâ€,
           `transitive S` and using with â€œDefinition of transitivityâ€:
    By induction on `i : â„•`:
      Base case `R ** 0 âŠ† S`:
        By â€œDefinition of **â€, Assumption `reflexive S`
      Induction step `R ** (suc i) âŠ† S`:
          R ** (suc i)
        =âŸ¨ â€œDefinition of **â€ âŸ© 
          R â¨¾ R ** i
        âŠ†âŸ¨ Monotonicity with Assumption `R âŠ† S` âŸ©
          S â¨¾ R ** i
        âŠ†âŸ¨ Monotonicity with Induction hypothesis âŸ©
          S â¨¾ S
        âŠ†âŸ¨ Assumption `transitive S` âŸ©
          S

Theorem â€œCharacterisation of `_*`: Minimalityâ€:
    R âŠ† S  â‡’  reflexive S  â‡’  transitive S  â‡’ R * âŠ† S
Proof:
  Assuming `R âŠ† S`, `reflexive S`, `transitive S`: 
       R * âŠ† S
     =âŸ¨ â€œDefinition of `_*`â€ âŸ© 
       (â‹ƒ i : â„• â€¢ R ** i) âŠ† S
     =âŸ¨ â€œCharacterisation of â‹ƒâ€ âŸ©
        âˆ€ i : â„• â€¢ R ** i âŠ† S
     =âŸ¨ â€œCharacterisation of `_*`: Expansion of powersâ€ 
        with Assumption `R âŠ† S` and Assumption `reflexive S` and
        Assumption `transitive S` âŸ© 
        âˆ€ i : â„• â€¢ true
     =âŸ¨ â€œTrue âˆ€ bodyâ€ âŸ©
        true 
